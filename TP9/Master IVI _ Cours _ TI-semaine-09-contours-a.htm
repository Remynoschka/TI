<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Lille 1, copyright 2010 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr"><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
    <title>Master IVI | Cours / TI-semaine-09-contours-a</title>
    <meta http-equiv="Content-Style-Type" content="text/css">
    <!--HeaderText--><style type="text/css"><!--.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel="stylesheet" href="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/pmwiki-core.css" type="text/css">

  <script type="text/javascript" src="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/LaTeXMathML.js"> </script>
<link rel="stylesheet" type="text/css" href="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/ics.css" media="screen">
  <meta name="robots" content="index,follow">
<meta name="description" content="master ivi informatique ase lille vision interaction image cours en ligne optique
image gradient norme seuillage norm threshold imagej">

    <link rel="stylesheet" title="Lille 1" href="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/lille1.css" type="text/css">
    <link rel="stylesheet" title="Lille 1" href="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/lille1-logo.css" type="text/css">
    <link rel="stylesheet" title="Lille 1" href="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/lille1-violet.css" type="text/css">
    <link rel="stylesheet" title="Lille 1" href="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/acces-lille1.css" type="text/css">
    <link rel="stylesheet" title="Lille 1" href="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/beautifier.css" type="text/css">
    <link rel="icon" title="Lille 1" href="http://master-ivi.univ-lille1.fr/pub/skins/lille1/images/lille1-icon.png" type="image/png">
  </head>
  <body onload="if (typeof initapplets == 'function') initapplets ();">
    <div id="acces">
      <form action="http://www.univ-lille1.fr/Accueil/redirection" method="get">
        <div> <img src="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/minilogo-lille1.png" alt="Université Lille1" title="Université Lille1">
          <div id="englobe_acces">
            <p><label for="acces_direct">Accéder aux autres sites de l'Université:</label></p>
            <select name="lien" id="acces_direct">
              <option selected="selected" value=""></option>
              <optgroup label="UFR et Faculté">
                <option value="http://ecosocio.univ-lille1.fr/">Faculté des Sciences Economiques et Sociales</option>
                <option value="http://sm-wimereux.univ-lille1.fr/">Station Marine de Wimereux</option>
                <option value="http://www.univ-lille1.fr/ufrbio">UFR Biologie</option>
                <option value="http://chimie.univ-lille1.fr/">UFR Chimie</option>
                <option value="http://geographie.univ-lille1.fr/">UFR Géographie</option>
                <option value="http://ieea.univ-lille1.fr/">UFR IEEA</option>
                <option value="http://ufr-math.univ-lille1.fr/">UFR Mathématiques</option>
                <option value="http://physique.univ-lille1.fr/">UFR Physique</option>
                <option value="http://www.univ-lille1.fr/geosciences/">UFR Sciences de la Terre</option>
              </optgroup>
              <optgroup label="Services">
                <option value="http://doc.univ-lille1.fr/">Bibliothèque universitaire</option>
                <option value="http://www.univ-lille1.fr/cups/">CUPS</option>
                <option value="http://cri.univ-lille1.fr">Centre de Ressources Informatiques</option>
                <option value="http://ci.univ-lille1.fr/">Centre international</option>
                <option value="http://www.univ-lille1.fr/personnels/">DPRH</option>
                <option value="http://ofip.univ-lille1.fr/">OFIP</option>
                <option value="http://pass-pro.univ-lille1.fr">Pass'Pro</option>
                <option value="http://suaio.univ-lille1.fr">SUAIO</option>
                <option value="http://suaps.univ-lille1.fr/">SUAPS</option>
                <option value="http://www.univ-lille1.fr/sudes">SUDES</option>
                <option value="http://semm.univ-lille1.fr">Service Multimédia</option>
              </optgroup>
              <optgroup label="Ecoles et Instituts">
                <option value="http://cueep.univ-lille1.fr/cueep/">CUEEP</option>
                <option value="http://www.iae.univ-lille1.fr/">IAE</option>
                <option value="http://www-iut.univ-lille1.fr/">IUT A</option>
                <option value="http://www.polytech-lille.fr/">Polytech-Lille</option>
              </optgroup>
            </select>
            <input title="Accéder au site" value="ok" type="submit">
          </div>
        </div>
      </form>
    </div>
    <div id="wrapper">
      <div id="head">
        <div id="page-actions"><ul><li class="browse"><a accesskey="" class="selflink" href="http://master-ivi.univ-lille1.fr/Cours/TI-semaine-09-contours-a">Vue</a>
</li><li class="print"><a accesskey="" rel="nofollow" class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/TI-semaine-09-contours-a?action=print">Imprimer</a>
</li><li class="logout"><a accesskey="" rel="nofollow" class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/TI-semaine-09-contours-a?action=login">Connexion</a>
</li></ul>
</div>
        <div id="page-title-box">
          <div id="page-title">Master IVI</div>
          <div id="page-subtitle">Cours &gt; TI semaine 09 contours a</div>
        </div>
      </div>
      <div id="image">
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="csSWF" height="146" width="780">
  <param name="movie" value="http://master-ivi.univ-lille1.fr/fichiers/Site/bandeau.swf">
  <param name="quality" value="autohigh">
  <param name="bgcolor" value="#ffffff">
  <param name="allowfullscreen" value="true">
  <param name="scale" value="showall">
  <param name="allowscriptaccess" value="always">
  <param name="flashvars" value="autostart=false&amp;thumb=http://master-ivi.univ-lille1.fr/fichiers/Site/bandeau.swf.thumb.png&amp;thumbscale=55&amp;color=0xffffff,0xffffff">
  <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/bandeau.swf" id="csSWF" height="146" width="780">
   <param name="quality" value="autohigh">
   <param name="bgcolor" value="#ffffff">
   <param name="allowfullscreen" value="true">
   <param name="scale" value="showall">
   <param name="allowscriptaccess" value="always">
   <param name="flashvars" value="autostart=false&amp;thumb=http://master-ivi.univ-lille1.fr/fichiers/Site/bandeau.swf.thumb.png&amp;thumbscale=55&amp;color=0xffffff,0xffffff">
  <!--<![endif]-->
   <div id="noUpdate">
     <p>The video content presented here requires a more recent version 
of the Adobe Flash Player. If you are you using a browser with 
JavaScript disabled please enable it now. Otherwise, please update your 
version of the free Flash Player by <a href="http://www.adobe.com/go/getflashplayer">downloading here</a>.</p>
   </div>
  <!--[if !IE]>-->
  </object>
  <!--<![endif]-->
</object>

</div>
      <div id="content">
        <div id="col-left">
          <!--PageLeftFmt-->
            <div id="leftsidebar"><h1><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Main/Accueil"><ins>Accueil</ins></a></h1>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Main/Objectifs">Objectifs</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Main/Programme">Programme</a></h2>
<h1><a class="wikilink" href="http://master-ivi.univ-lille1.fr/2013/Accueil"><ins>2013-2014</ins></a></h1>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/2013/Calendrier-M1">Calendrier M1</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/2013/Calendrier-M2">Calendrier M2</a></h2>
<h1><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/Accueil"><ins>Cours en ligne</ins></a></h1>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/PjE">S1 - PjE</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/RdF">S2 - RdF</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/TI">S2 - TI</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/M3DS">S2 - M3DS</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/M3DA">S3 - M3DA</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/VisA">S3 - VisA</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/RVI">S3 - RVI</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/VInd">S3 - VInd</a></h2>
<h2><a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/PJS">S3 - PJS</a></h2>
</div>
          <!--/PageLeftFmt-->
        </div>
        <div id="col-right">
          <!--PageText-->
<div id="wikitext">
<h1>1. Seuillage de la norme d'un gradient </h1>
<p style="text-align: right;"><span class="wikitrail">&lt;&lt;  | <a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/TI-semaine-09-contours">Liste des exercices</a> | <a class="wikilink" href="http://master-ivi.univ-lille1.fr/Cours/TI-semaine-09-contours-b">Détection des maxima locaux</a> &gt;&gt;</span>
</p>
<div class="vspace"></div><h2>Introduction</h2>
<p>Le but de cet exercice est d'examiner l'adaptation d'un seuillage 
global de la norme d'un gradient à la détection des contours dans une 
image.
</p>
<div class="vspace"></div><h2>Représentation de la norme d'un gradient</h2>
<h3>Calcul de la norme d'un gradient par convolution</h3>
<p>L'image considérée ici est codée sur 8 bits (niveaux de gris de 0 à 255)&nbsp;:
</p><div style="text-align: center;"><img src="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/lighthouse_8bits.png" alt="" title="" width="200"></div>
<div class="vspace"></div><ol><li>Enregistrer cette image à partir de cette page et l'ouvrir sous ImageJ.
<div class="vspace"></div></li><li>Compléter la macro suivante&nbsp;:
</li></ol><pre class="sourcecode"><span class="linecomment">// Calcul de la norme du gradient par masque de Sobel</span>
<span class="linecomment">//</span>
requires("1.41i");	<span class="linecomment">// requis par substring(string, index)</span>
setBatchMode(<span class="category_1">true</span>);

sourceImage = getImageID();
filename = getTitle();
extension = "";
<span class="category_1">if</span> (lastIndexOf(filename, ".") &gt; 0) {
    extension = substring(filename, lastIndexOf(filename, "."));
    filename = substring(filename, 0, lastIndexOf(filename, "."));
}
filenameGradX = filename+"_grad_x"+extension;
filenameGradY = filename+"_grad_y"+extension;
run("Duplicate...", "title="+filenameGradX);
run("32-bit");	<span class="linecomment">// Conversion en Float avant calcul des dérivées !!</span>
... <span class="linecomment">// à compléter</span>
<span class="blockcomment">/****** Calcul de la norme du gradient ******/</span>
<span class="linecomment">// récupération de la taille de l'image</span>
w = getWidth();
h = getHeight();
<span class="linecomment">// Calculs pour chaque pixel</span>
... <span class="linecomment">// à compléter</span>
setBatchMode("exit and display");
</pre>
<div class="vspace"></div><div class="indent">de façon à&nbsp;:
<ul><li>Calculer une approximation des dérivées partielles de la fonction image dans chaque direction principale <span><math title="(x,y)"><mstyle><mo maxsize="1">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo maxsize="1">)</mo></mstyle></math></span> par convolution avec les masques de Sobel&nbsp;: <br clear="all">  <img src="Master%20IVI%20_%20Cours%20_%20TI-semaine-09-contours-a_fichiers/gradient_sobel.gif" alt="" title="" width="75%">
<div class="vspace"></div></li><li>Calculer la norme du gradient dans une nouvelle image. Cette image peut être simplement créée par duplication de l'image de <span><math title="\frac{\partial I}{\partial x}"><mstyle><mfrac><mrow><mo>&#8706;</mo><mi>I</mi></mrow><mrow><mo>&#8706;</mo><mi>x</mi></mrow></mfrac></mstyle></math></span> (ci-dessus nommée <strong>filenameGradX</strong>, de profondeur 32 bits), puis modifiée en chaque pixel grâce à la fonction <strong>setPixel</strong>.
</li></ul></div><div class="vspace"></div><h3>Comparaison avec le résultat fourni par ImageJ.</h3>
<ol><li value="3"> L'image obtenue est de profondeur 32 bits. Quelle est sa valeur minimale et sa valeur maximale (utiliser le menu <em>Analyse</em>/<em>Histogram</em> ou <em>Analyse</em>/<em>Measure</em>) et comment les expliquez-vous&nbsp;? 
<div class="vspace"></div></li><li value="4"> Comparer cette image avec 
le résultat obtenu en appliquant sur l'image source la fonctionnalité de
 calcul de la norme du gradient intégrée à ImageJ (menu <em>Process</em>/<em>Find Edges</em>).
 Quelle transformation faut-il opérer sur l'image issue de votre calcul 
pour obtenir un résultat similaire&nbsp;? Appliquer effectivement cette 
transformation grâce au menu <em>Image</em>/<em>Adjust</em>/<em>Brightness/Contrast ...</em>, transformer l'image correspondante en niveaux sur 8&nbsp;bits, puis comparer numériquement (grâce au menu <em>Process</em>/<em>Image Calculator ...</em>) les deux images ainsi obtenues pour la norme du gradient.
</li></ol><div class="vspace"></div><h2>Seuillage de la norme du gradient précédemment calculée</h2>
<ol><li value="5"> Utiliser le menu <em>Image</em>/<em>Adjust</em>/<em>Threshold...</em>
 pour seuiller la norme du gradient calculée. Est-il possible de trouver
 ainsi un seuil global pour l'image qui mette en évidence les pixels 
contours de manière satisfaisante&nbsp;?
<div class="vspace"></div></li><li value="6"> Une alternative est de 
déterminer ce seuil de manière semi-automatique grâce à l'histogramme 
cumulé de l'image de la norme du gradient. L'idée est de sélectionner 
seulement un certain pourcentage de pixels contours&nbsp;: ceux pour 
lesquels la norme est la plus élevée, c'est-à-dire les <em>n</em>% de pixels contours les plus significatifs.
</li></ol><div class="indent">Sur la base de ce principe, proposer un 
nouveau seuil pour la norme du gradient en ne retenant que 20% des 
pixels contours. Ce seuil est-il plus satisfaisant que celui déterminé à
 la question précédente&nbsp;?
</div><div class="indent"><em>Remarque</em>&nbsp;: Bizarrement, ImageJ 
ne comporte pas de fonction calculant l'histogramme cumulé d'une image. 
On pourra donc s'aider de la petite macro suivante&nbsp;:
</div><pre class="sourcecode"><span class="linecomment">// Histogramme cumulé</span>
getRawStatistics(surf, moy, min, max, std, h); <span class="linecomment">// h[0..255] &lt;-&gt; histo</span>
hc=newArray(256);
hc[0]=h[0];
<span class="category_1">for</span> (i=1;i&lt; h.length;i++) {
    hc[i] = hc[i-1]+h[i] ;
}
Plot.create("Histogramme cumulé de "+getTitle, "Niveau", "hc", hc);
Plot.show();
</pre>
</div>

        </div>
        <div class="clearfix"></div>
      </div>
      <div class="clearfix"></div>
      <!--PageFooterFmt-->
        <div id="footer">
          <div id="copyright"><p>© 2010, <a class="urllink" href="http://ieea.univ-lille1.fr/" rel="nofollow">UFR d'IEEA</a> | spécialité commune aux mentions <a class="urllink" href="http://master-ase.univ-lille1.fr/" rel="nofollow">ASE</a> et <a class="urllink" href="http://fil.univ-lille1.fr/master-informatique/" rel="nofollow">Informatique</a> du <a class="urllink" href="http://www.univ-lille1.fr/etudes/offre-de-formation/Sciences-Technologies-Sante" rel="nofollow">master S&amp;T</a> |
<a class="urllink" href="http://www.univ-lille1.fr/" rel="nofollow">Université Lille 1</a>
</p>
</div>
        </div>
      <!--/PageFooterFmt-->
    </div>
    <div class="clearfix"></div>
  


</body></html>